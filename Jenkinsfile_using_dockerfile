pipeline{

	agent{
	  label 'slave2'	
	}
	
	parameters{
		string(name : 'DEPLOY_ENV', defaultValue: 'staging', description: 'mutiple environment')	
	}

	stages{
		stage('Checkout'){
			steps{
			  checkout scm
		} }
		stage('Build'){
			steps{
			  sh 'JAVA_HOME=/home/gamut/Distros/jdk1.8.0_191 /home/gamut/Distros/apache-maven-3.6.0/bin/mvn install'
		} }
		stage('Build_Image'){
			steps{
			  sh 'docker build -t="swapnilhub/jenkinsfile-image" .'
		} }
		stage('Create_Environment'){
			steps{
			  sh './create-env.sh $DEPLOY_ENV'
		}}
	}
}
